<UserControl x:Class="BudgetPlanner.PresentationLayer.Views.BudgetPostsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
             xmlns:domain="clr-namespace:BudgetPlanner.DomainLayer.Enums"
             xmlns:local="clr-namespace:BudgetPlanner.PresentationLayer.Resources.Converters">

    <Grid Background="{StaticResource BackgroundLight}" Margin="16">

        <StackPanel>

            <!-- HEADER -->
            <TextBlock Text="Budgetposter" Style="{StaticResource HeaderTextStyle}"/>

            <!-- FILTER CARD -->
            <Border Style="{StaticResource CardStyle}" Margin="0,16,0,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Datumintervall -->
                    <StackPanel Grid.Column="0" Margin="0,0,24,0">
                        <TextBlock Text="Från" Style="{StaticResource LabelTextStyle}"/>
                        <DatePicker SelectedDate="{Binding FromDate}" />
                    </StackPanel>

                    <StackPanel Grid.Column="1" Margin="0,0,24,0">
                        <TextBlock Text="Till" Style="{StaticResource LabelTextStyle}"/>
                        <DatePicker SelectedDate="{Binding ToDate}" />
                    </StackPanel>

                    <!-- Kategori -->
                    <StackPanel Grid.Column="2" Margin="0,0,24,0">
                        <TextBlock Text="Kategori" Style="{StaticResource LabelTextStyle}"/>
                        <ComboBox ItemsSource="{Binding Categories}"
                                  DisplayMemberPath="Name"
                                  SelectedItem="{Binding SelectedCategory}"
                                  Width="150"
                                  />
                    </StackPanel>

                    <!-- Sökfält -->
                    <StackPanel Grid.Column="3">
                        <TextBlock Text="Sök" Style="{StaticResource LabelTextStyle}"/>
                        <TextBox Text="{Binding SerachText}"
                                  Width="200"
                                  Padding="6"
                                  Background="{StaticResource PrimaryBlueLight}"/>
                    </StackPanel>

                    <!-- Ny post -->
                    <Button Grid.Column="4"
                            Content="Ny budgetpost"
                            Command="{Binding AddNewBudgetPostCommand}"
                            Background="{StaticResource PrimaryBlue}"
                            Foreground="White"
                            Padding="8,4"
                            Margin="16,0,0,0"
                            VerticalAlignment="Bottom"
                    />
                </Grid>
            </Border>

            <!-- POST-TYPE FILTERS -->
            <StackPanel>
                <TextBlock Text="Typ av post" Style="{StaticResource LabelTextStyle}" Width="150" Margin="0,0,0,4"/>
                <ComboBox Width="150"
                          Margin="0 0 10 0"
                          SelectedItem="{Binding SelectedType}">
                    <ComboBox.ItemsSource>
                        <x:Array Type="{x:Type domain:BudgetPostType}">
                            <domain:BudgetPostType>Income</domain:BudgetPostType>
                            <domain:BudgetPostType>Expense</domain:BudgetPostType>
                        </x:Array>
                    </ComboBox.ItemsSource>
                </ComboBox>
            </StackPanel>

            <!-- LISTA -->
            <Border Style="{StaticResource CardStyle}" Margin="0,16,0,0">
                <ListView ItemsSource="{Binding FilteredPosts}"
                          ItemTemplate="{StaticResource BudgetPostTemplate}">

                </ListView>
            </Border>
        </StackPanel>


    </Grid>
</UserControl>